<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Edge Impulse: Rubber Ducky Detection</title>
</head>
<body>
  <div class="container col-xxl-8 px-4 py-5">
    <img class="d-block mx-auto mb-4" src="assets/EI_logo_stacked.png" alt="" width="200">
    <hr>
    <div class="row">
      <div class="col-6 text-center">
        <h2>Original Frames</h2>
        <!-- <p class="mb-4">Original Frames</p> -->
        <img src="{{ url_for('video_feed') }}" class="d-block mx-lg-auto img-fluid" alt="High-res Video" width="800" loading="lazy">
      </div>
      <div class="col-6 text-center"> 
        <h2>Inference Results</h2>
        <!-- <p class="mb-4">This feed shows the object detection results</p> -->
        <img src="{{ url_for('inference_feed') }}" class="img-fluid border rounded-3 mb-4" width="400" alt="Processed Inference Feed" loading="lazy">
        <div class="col-lg-6 mx-auto">
          <p class="">Inference speed: <span id="inference_speed"></span> ms</p>
          <p class="">Objects detected: <span id="object_counter"></span></p>
        </div>
      </div>
    </div>

  <script>
    const sourceInference = new EventSource("/inference_speed");
    sourceInference.onmessage = (event) => {
      document.getElementById("inference_speed").textContent = event.data;
    };

    const sourceObjects = new EventSource("/object_counter");
    sourceObjects.onmessage = (event) => {
      document.getElementById("object_counter").textContent = event.data;
    };
  </script>
</body>
</html>
